# Homebrew åŒ…ç®¡ç†å·¥å…·

> æœ¬ç›®å½•åŒ…å«ç”¨äºç®¡ç† Homebrew åŒ…çš„å®ç”¨è„šæœ¬ï¼Œæ–¹ä¾¿æŒ‰æ—¥æœŸæŸ¥çœ‹å’Œå¸è½½åŒ…ã€‚

---

## ğŸ“¦ å·¥å…·åˆ—è¡¨

### 1. list-brew-packages-by-date.sh

**åŠŸèƒ½**: æ˜¾ç¤ºæ‰€æœ‰å·²å®‰è£… Homebrew åŒ…çš„å®‰è£…æ—¶é—´ï¼ˆæŒ‰æ—¶é—´æ’åºï¼‰

**æ–‡ä»¶è·¯å¾„**: `./shell/brew/list-brew-packages-by-date.sh`

#### ä½¿ç”¨æ–¹æ³•

```bash
# æ·»åŠ æ‰§è¡Œæƒé™
chmod +x list-brew-packages-by-date.sh

# è¿è¡Œè„šæœ¬
./list-brew-packages-by-date.sh
```

#### è¾“å‡ºç¤ºä¾‹

```
Homebrew Packages Installation Time (Oldest First):
====================================================
autoconf              Jan 10 09:15
automake              Jan 10 09:18
cmake                 Jan 15 14:30
git                   Jan 20 11:45
node                  Jan 25 16:20
```

#### åŠŸèƒ½ç‰¹æ€§

- âœ… è‡ªåŠ¨æ£€æµ‹ Homebrew å®‰è£…è·¯å¾„ï¼ˆæ”¯æŒ Intel å’Œ Apple Silicon Macï¼‰
- âœ… æ˜¾ç¤ºæ¯ä¸ªåŒ…çš„å®‰è£…æ—¥æœŸå’Œæ—¶é—´
- âœ… æŒ‰æ—¶é—´ä»æ—©åˆ°æ™šæ’åº
- âœ… æ”¯æŒä¸¤ç§å®‰è£…è·¯å¾„ï¼š
  - `/opt/homebrew/Cellar` (Apple Silicon)
  - `/usr/local/Cellar` (Intel)

#### æŠ€æœ¯ç»†èŠ‚

**æ”¯æŒçš„æ“ä½œç³»ç»Ÿ**:
- macOS (Intel x86_64)
- macOS (Apple Silicon - M1/M2/M3)

**ä¾èµ–å‘½ä»¤**:
- `brew` - Homebrew åŒ…ç®¡ç†å™¨
- `stat` - æ–‡ä»¶çŠ¶æ€æŸ¥è¯¢
- `ls` - åˆ—å‡ºæ–‡ä»¶
- `awk` - æ–‡æœ¬å¤„ç†

---

### 2. uninstall-brew-by-date.sh

**åŠŸèƒ½**: æ ¹æ®å®‰è£…æ—¥æœŸæ‰¹é‡å¸è½½ Homebrew åŒ…

**æ–‡ä»¶è·¯å¾„**: `./shell/brew/uninstall-brew-by-date.sh`

#### ä½¿ç”¨æ–¹æ³•

```bash
# æ·»åŠ æ‰§è¡Œæƒé™
chmod +x uninstall-brew-by-date.sh

# å¸è½½æŒ‡å®šæ—¥æœŸå®‰è£…çš„åŒ…
./uninstall-brew-by-date.sh 2025-01-30

# å¸è½½ä»Šå¤©å®‰è£…çš„åŒ…ï¼ˆé»˜è®¤ï¼‰
./uninstall-brew-by-date.sh
```

#### äº¤äº’ç¤ºä¾‹

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘   Homebrew åŒ…å¸è½½å·¥å…·                           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âš ï¸  åœ¨ 2025-01-30 å®‰è£…çš„åŒ…:
====================================
  â€¢ package1
  â€¢ package2
  â€¢ package3

ç¡®å®šè¦å¸è½½ä»¥ä¸Šæ‰€æœ‰åŒ…å—ï¼Ÿ(y/n): y

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  å¼€å§‹å¸è½½...
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â„¹ï¸  æ­£åœ¨å¸è½½ package1...
âœ… package1 å·²å¸è½½
â„¹ï¸  æ­£åœ¨å¸è½½ package2...
âœ… package2 å·²å¸è½½
â„¹ï¸  æ­£åœ¨å¸è½½ package3...
âŒ package3 å¸è½½å¤±è´¥

â„¹ï¸  å¸è½½å®Œæˆ: æˆåŠŸ 2 ä¸ª, å¤±è´¥ 1 ä¸ª

âœ… æ‰€æœ‰æ“ä½œå®Œæˆï¼
```

#### åŠŸèƒ½ç‰¹æ€§

- âœ… æŒ‡å®šæ—¥æœŸæˆ–é»˜è®¤å¸è½½å½“å¤©å®‰è£…çš„åŒ…
- âœ… äº¤äº’å¼ç¡®è®¤ï¼Œé¿å…è¯¯æ“ä½œ
- âœ… å½©è‰²è¾“å‡ºï¼Œæ˜“äºé˜…è¯»
- âœ… æ˜¾ç¤ºå¸è½½è¿›åº¦
- âœ… ç»Ÿè®¡æˆåŠŸå’Œå¤±è´¥æ•°é‡
- âœ… å®‰å…¨ä¿æŠ¤ï¼šéœ€è¦ç”¨æˆ·ç¡®è®¤æ‰æ‰§è¡Œå¸è½½

#### å‚æ•°è¯´æ˜

| å‚æ•° | è¯´æ˜ | ç¤ºä¾‹ | é»˜è®¤å€¼ |
|------|------|------|--------|
| [YYYY-MM-DD] | ç›®æ ‡æ—¥æœŸ | 2025-01-30 | å½“å‰æ—¥æœŸ |

#### å®‰å…¨æç¤º

âš ï¸ **é‡è¦æé†’**:
- å¸è½½æ“ä½œä¸å¯é€†ï¼Œè¯·è°¨æ…ç¡®è®¤
- å»ºè®®å…ˆç”¨ `list-brew-packages-by-date.sh` æŸ¥çœ‹åŒ…åˆ—è¡¨
- ç¡®è®¤è¦å¸è½½çš„åŒ…åå†æ‰§è¡Œå¸è½½è„šæœ¬
- æŸäº›åŒ…å¯èƒ½æ˜¯å…¶ä»–åŒ…çš„ä¾èµ–ï¼Œå¸è½½æ—¶è¯·æ³¨æ„ä¾èµ–å…³ç³»

#### æŠ€æœ¯ç»†èŠ‚

**é¢œè‰²è¾“å‡º**:
- ğŸ”µ è“è‰² - æç¤ºä¿¡æ¯
- ğŸŸ¢ ç»¿è‰² - æˆåŠŸä¿¡æ¯
- ğŸŸ¡ é»„è‰² - è­¦å‘Šä¿¡æ¯
- ğŸ”´ çº¢è‰² - é”™è¯¯ä¿¡æ¯

**é”™è¯¯å¤„ç†**:
- å¦‚æœåŒ…å¸è½½å¤±è´¥ï¼Œä¼šæ˜¾ç¤ºé”™è¯¯ä½†ç»§ç»­å¤„ç†å…¶ä»–åŒ…
- æœ€åæ˜¾ç¤ºæˆåŠŸå’Œå¤±è´¥çš„ç»Ÿè®¡ä¿¡æ¯

---

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### åœºæ™¯ 1: æ¸…ç†æµ‹è¯•ç¯å¢ƒ

å¦‚æœä½ åœ¨æŸå¤©å®‰è£…äº†ä¸€äº›æµ‹è¯•åŒ…ï¼Œæƒ³ä¸€æ¬¡æ€§æ¸…ç†ï¼š

```bash
# 1. æŸ¥çœ‹ä»Šå¤©å®‰è£…äº†å“ªäº›åŒ…
cd shell/brew
./list-brew-packages-by-date.sh

# 2. æ‰¾åˆ°ç›®æ ‡æ—¥æœŸï¼ˆå¦‚ 2025-01-30ï¼‰
# 3. å¸è½½è¯¥æ—¥æœŸçš„æ‰€æœ‰åŒ…
./uninstall-brew-by-date.sh 2025-01-30
```

### åœºæ™¯ 2: å›é€€é…ç½®

å®‰è£…æ–°ç‰ˆæœ¬çš„åŒ…åå‘ç°ä¸å…¼å®¹ï¼Œæƒ³å›é€€åˆ°ä¹‹å‰çš„ç‰ˆæœ¬ï¼š

```bash
# 1. æŸ¥çœ‹åŒ…å®‰è£…æ—¶é—´
./list-brew-packages-by-date.sh

# 2. å¸è½½ç‰¹å®šæ—¥æœŸå®‰è£…çš„åŒ…
./uninstall-brew-by-date.sh 2025-01-28
```

### åœºæ™¯ 3: å®šæœŸæ¸…ç†

å®šæœŸæ¸…ç†æ—§åŒ…ï¼Œé‡Šæ”¾ç£ç›˜ç©ºé—´ï¼š

```bash
# æŸ¥çœ‹æœ€æ—©å®‰è£…çš„åŒ…
./list-brew-packages-by-date.sh | head -20

# å¸è½½æŸä¸ªæ—¶é—´æ®µçš„åŒ…
./uninstall-brew-by-date.sh 2025-01-15
./uninstall-brew-by-date.sh 2025-01-20
```

---

## ğŸ”§ é«˜çº§ç”¨æ³•

### ç»„åˆä½¿ç”¨ä¸¤ä¸ªè„šæœ¬

```bash
# æŸ¥çœ‹åŒ…åˆ—è¡¨å¹¶å¤åˆ¶æ—¥æœŸ
./list-brew-packages-by-date.sh

# é€‰æ‹©æ—¥æœŸåç«‹å³å¸è½½
./uninstall-brew-by-date.sh 2025-01-30
```

### åˆ›å»ºåˆ«åæ–¹ä¾¿ä½¿ç”¨

åœ¨ `~/.zshrc` ä¸­æ·»åŠ ï¼š

```bash
# Homebrew åŒ…ç®¡ç†åˆ«å
alias brew-list='~/Repos/rendu-env/shell/brew/list-brew-packages-by-date.sh'
alias brew-uninstall='~/Repos/rendu-env/shell/brew/uninstall-brew-by-date.sh'
```

ä½¿ç”¨æ—¶ï¼š

```bash
# æŸ¥çœ‹åŒ…å®‰è£…æ—¶é—´
brew-list

# å¸è½½ä»Šå¤©çš„åŒ…
brew-uninstall

# å¸è½½æŒ‡å®šæ—¥æœŸçš„åŒ…
brew-uninstall 2025-01-30
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. è·¯å¾„é—®é¢˜

è„šæœ¬ä¼šè‡ªåŠ¨æ£€æµ‹ Homebrew å®‰è£…è·¯å¾„ï¼š
- **Apple Silicon**: `/opt/homebrew/Cellar`
- **Intel**: `/usr/local/Cellar`

å¦‚æœå®‰è£…åœ¨å…¶ä»–ä½ç½®ï¼Œéœ€è¦æ‰‹åŠ¨ä¿®æ”¹è„šæœ¬ã€‚

### 2. æ—¥æœŸæ ¼å¼

æ—¥æœŸå¿…é¡»ä½¿ç”¨ `YYYY-MM-DD` æ ¼å¼ï¼š
- âœ… æ­£ç¡®: `2025-01-30`
- âŒ é”™è¯¯: `2025/01/30`, `30-01-2025`, `2025.01.30`

### 3. æƒé™é—®é¢˜

é¦–æ¬¡ä½¿ç”¨éœ€è¦æ·»åŠ æ‰§è¡Œæƒé™ï¼š

```bash
chmod +x list-brew-packages-by-date.sh
chmod +x uninstall-brew-by-date.sh
```

### 4. ä¾èµ–å…³ç³»

å¸è½½æŸä¸ªåŒ…å¯èƒ½å½±å“å…¶ä»–åŒ…ï¼Œå»ºè®®ï¼š

1. å…ˆæŸ¥çœ‹åŒ…çš„ä¾èµ–å…³ç³»ï¼š
   ```bash
   brew deps package-name
   ```

2. ç¡®è®¤æ²¡æœ‰å…¶ä»–åŒ…ä¾èµ–å®ƒåå†å¸è½½

### 5. æ•°æ®å¤‡ä»½

å¸è½½å‰å»ºè®®å¤‡ä»½é‡è¦é…ç½®ï¼š

```bash
# æŸ¥çœ‹åŒ…çš„é…ç½®æ–‡ä»¶ä½ç½®
brew list --verbose package-name
```

---

## ğŸ› æ•…éšœæ’é™¤

### é—®é¢˜ 1: "command not found: brew"

**åŸå› **: Homebrew æœªå®‰è£…æˆ–æœªåœ¨ PATH ä¸­

**è§£å†³**:
```bash
# æ£€æŸ¥ Homebrew æ˜¯å¦å®‰è£…
which brew

# å¦‚æœæœªå®‰è£…ï¼Œè®¿é—® https://brew.sh å®‰è£…
```

### é—®é¢˜ 2: "æœªæ‰¾åˆ° YYYY-MM-DD å®‰è£…çš„åŒ…"

**åŸå› **: æŒ‡å®šæ—¥æœŸæ²¡æœ‰å®‰è£…åŒ…

**è§£å†³**:
```bash
# å…ˆæŸ¥çœ‹æ‰€æœ‰åŒ…çš„å®‰è£…æ—¶é—´
./list-brew-packages-by-date.sh

# é€‰æ‹©æ­£ç¡®çš„æ—¥æœŸ
./uninstall-brew-by-date.sh æ­£ç¡®çš„æ—¥æœŸ
```

### é—®é¢˜ 3: "permission denied"

**åŸå› **: è„šæœ¬æ²¡æœ‰æ‰§è¡Œæƒé™

**è§£å†³**:
```bash
chmod +x uninstall-brew-by-date.sh
```

### é—®é¢˜ 4: å¸è½½å¤±è´¥

**åŸå› **: åŒ…è¢«å…¶ä»–è¿›ç¨‹å ç”¨æˆ–æƒé™ä¸è¶³

**è§£å†³**:
```bash
# å°è¯•ä½¿ç”¨ sudo
sudo brew uninstall package-name

# æˆ–æ£€æŸ¥æ˜¯å¦æœ‰è¿›ç¨‹æ­£åœ¨ä½¿ç”¨
lsof | grep package-name
```

---

## ğŸ“Š ç›¸å…³å‘½ä»¤

### Homebrew åŸºæœ¬å‘½ä»¤

```bash
# æŸ¥çœ‹å·²å®‰è£…çš„åŒ…
brew list

# æŸ¥çœ‹åŒ…ä¿¡æ¯
brew info package-name

# æŸ¥çœ‹åŒ…çš„ä¾èµ–å…³ç³»
brew deps package-name

# æŸ¥çœ‹ä¾èµ–å½“å‰åŒ…çš„å…¶ä»–åŒ…
brew uses --installed package-name

# æ›´æ–° Homebrew
brew update

# æ›´æ–°æ‰€æœ‰åŒ…
brew upgrade

# æ¸…ç†æ—§ç‰ˆæœ¬
brew cleanup

# å¸è½½åŒ…
brew uninstall package-name
```

### ç³»ç»Ÿç›¸å…³å‘½ä»¤

```bash
# æŸ¥çœ‹ç£ç›˜ä½¿ç”¨æƒ…å†µ
df -h

# æŸ¥çœ‹ç›®å½•å¤§å°
du -sh /opt/homebrew/Cellar/package-name

# æŸ¥çœ‹æ–‡ä»¶ä¿®æ”¹æ—¶é—´
stat filename
```

---

## ğŸ“š å‚è€ƒèµ„æº

- [Homebrew å®˜æ–¹æ–‡æ¡£](https://docs.brew.sh/)
- [Homebrew å¸¸ç”¨å‘½ä»¤](https://docs.brew.sh/Manpage)
- [macOS æ–‡ä»¶æƒé™](https://support.apple.com/guide/mac-help/change-permissions-files-folders-mh00882/mac)

---

## ğŸ”„ æ›´æ–°æ—¥å¿—

### v1.0.0 (2025-01-31)

**æ–°å¢**:
- list-brew-packages-by-date.sh - åŒ…å®‰è£…æ—¶é—´æŸ¥è¯¢
- uninstall-brew-by-date.sh - æŒ‰æ—¥æœŸå¸è½½åŒ…
- å®Œæ•´çš„ä»£ç æ³¨é‡Šå’Œä½¿ç”¨æ–‡æ¡£

**ç‰¹æ€§**:
- æ”¯æŒ Intel å’Œ Apple Silicon Mac
- å½©è‰²è¾“å‡º
- äº¤äº’å¼ç¡®è®¤
- é”™è¯¯å¤„ç†

---

**æœ€åæ›´æ–°**: 2025-01-31
**ç»´æŠ¤è€…**: rendu-env
**ç›¸å…³é—®é¢˜**: è¯·æäº¤ GitHub Issue
